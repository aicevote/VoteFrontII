(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{385:function(e,t){},390:function(e,t,r){var map={"./af":222,"./af.js":222,"./ar":223,"./ar-dz":224,"./ar-dz.js":224,"./ar-kw":225,"./ar-kw.js":225,"./ar-ly":226,"./ar-ly.js":226,"./ar-ma":227,"./ar-ma.js":227,"./ar-sa":228,"./ar-sa.js":228,"./ar-tn":229,"./ar-tn.js":229,"./ar.js":223,"./az":230,"./az.js":230,"./be":231,"./be.js":231,"./bg":232,"./bg.js":232,"./bm":233,"./bm.js":233,"./bn":234,"./bn.js":234,"./bo":235,"./bo.js":235,"./br":236,"./br.js":236,"./bs":237,"./bs.js":237,"./ca":238,"./ca.js":238,"./cs":239,"./cs.js":239,"./cv":240,"./cv.js":240,"./cy":241,"./cy.js":241,"./da":242,"./da.js":242,"./de":243,"./de-at":244,"./de-at.js":244,"./de-ch":245,"./de-ch.js":245,"./de.js":243,"./dv":246,"./dv.js":246,"./el":247,"./el.js":247,"./en-au":248,"./en-au.js":248,"./en-ca":249,"./en-ca.js":249,"./en-gb":250,"./en-gb.js":250,"./en-ie":251,"./en-ie.js":251,"./en-il":252,"./en-il.js":252,"./en-in":253,"./en-in.js":253,"./en-nz":254,"./en-nz.js":254,"./en-sg":255,"./en-sg.js":255,"./eo":256,"./eo.js":256,"./es":257,"./es-do":258,"./es-do.js":258,"./es-us":259,"./es-us.js":259,"./es.js":257,"./et":260,"./et.js":260,"./eu":261,"./eu.js":261,"./fa":262,"./fa.js":262,"./fi":263,"./fi.js":263,"./fil":264,"./fil.js":264,"./fo":265,"./fo.js":265,"./fr":266,"./fr-ca":267,"./fr-ca.js":267,"./fr-ch":268,"./fr-ch.js":268,"./fr.js":266,"./fy":269,"./fy.js":269,"./ga":270,"./ga.js":270,"./gd":271,"./gd.js":271,"./gl":272,"./gl.js":272,"./gom-deva":273,"./gom-deva.js":273,"./gom-latn":274,"./gom-latn.js":274,"./gu":275,"./gu.js":275,"./he":276,"./he.js":276,"./hi":277,"./hi.js":277,"./hr":278,"./hr.js":278,"./hu":279,"./hu.js":279,"./hy-am":280,"./hy-am.js":280,"./id":281,"./id.js":281,"./is":282,"./is.js":282,"./it":283,"./it-ch":284,"./it-ch.js":284,"./it.js":283,"./ja":285,"./ja.js":285,"./jv":286,"./jv.js":286,"./ka":287,"./ka.js":287,"./kk":288,"./kk.js":288,"./km":289,"./km.js":289,"./kn":290,"./kn.js":290,"./ko":291,"./ko.js":291,"./ku":292,"./ku.js":292,"./ky":293,"./ky.js":293,"./lb":294,"./lb.js":294,"./lo":295,"./lo.js":295,"./lt":296,"./lt.js":296,"./lv":297,"./lv.js":297,"./me":298,"./me.js":298,"./mi":299,"./mi.js":299,"./mk":300,"./mk.js":300,"./ml":301,"./ml.js":301,"./mn":302,"./mn.js":302,"./mr":303,"./mr.js":303,"./ms":304,"./ms-my":305,"./ms-my.js":305,"./ms.js":304,"./mt":306,"./mt.js":306,"./my":307,"./my.js":307,"./nb":308,"./nb.js":308,"./ne":309,"./ne.js":309,"./nl":310,"./nl-be":311,"./nl-be.js":311,"./nl.js":310,"./nn":312,"./nn.js":312,"./oc-lnc":313,"./oc-lnc.js":313,"./pa-in":314,"./pa-in.js":314,"./pl":315,"./pl.js":315,"./pt":316,"./pt-br":317,"./pt-br.js":317,"./pt.js":316,"./ro":318,"./ro.js":318,"./ru":319,"./ru.js":319,"./sd":320,"./sd.js":320,"./se":321,"./se.js":321,"./si":322,"./si.js":322,"./sk":323,"./sk.js":323,"./sl":324,"./sl.js":324,"./sq":325,"./sq.js":325,"./sr":326,"./sr-cyrl":327,"./sr-cyrl.js":327,"./sr.js":326,"./ss":328,"./ss.js":328,"./sv":329,"./sv.js":329,"./sw":330,"./sw.js":330,"./ta":331,"./ta.js":331,"./te":332,"./te.js":332,"./tet":333,"./tet.js":333,"./tg":334,"./tg.js":334,"./th":335,"./th.js":335,"./tl-ph":336,"./tl-ph.js":336,"./tlh":337,"./tlh.js":337,"./tr":338,"./tr.js":338,"./tzl":339,"./tzl.js":339,"./tzm":340,"./tzm-latn":341,"./tzm-latn.js":341,"./tzm.js":340,"./ug-cn":342,"./ug-cn.js":342,"./uk":343,"./uk.js":343,"./ur":344,"./ur.js":344,"./uz":345,"./uz-latn":346,"./uz-latn.js":346,"./uz.js":345,"./vi":347,"./vi.js":347,"./x-pseudo":348,"./x-pseudo.js":348,"./yo":349,"./yo.js":349,"./zh-cn":350,"./zh-cn.js":350,"./zh-hk":351,"./zh-hk.js":351,"./zh-mo":352,"./zh-mo.js":352,"./zh-tw":353,"./zh-tw.js":353};function n(e){var t=o(e);return r(t)}function o(e){if(!r.o(map,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return map[e]}n.keys=function(){return Object.keys(map)},n.resolve=o,e.exports=n,n.id=390},391:function(e,t,r){"use strict";r.r(t);r(17),r(355),r(16);var n=r(2),o=r(69),c=r(359),m=r.n(c),l=r(354),j=l.c.reactiveProp,h={extends:l.a,mixins:[j],props:["options"],mounted:function(){this.renderChart(this.chartData,this.options)}},v=l.c.reactiveProp,d={extends:l.b,mixins:[v],props:["options"],mounted:function(){this.renderChart(this.chartData,this.options)}},f=["rgba(255, 99, 132, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 205, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(54, 162, 235, 0.2)","rgba(153, 102, 255, 0.2)","rgba(201, 203, 207, 0.2)"],_=["rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(54, 162, 235)","rgb(153, 102, 255)","rgb(201, 203, 207)"];function k(title,e,t){return{labels:e,datasets:[{label:title,backgroundColor:f,borderColor:_,borderWidth:1,fill:!1,data:t}]}}function w(e,t){return{labels:(t=t.reverse()).map((function(e){return new Date(e.timestamp)})),datasets:e.map((function(e,i){return{label:e,backgroundColor:f[i],borderColor:_[i],borderWidth:1,fill:!0,data:t.map((function(e){return Math.min(e.percentage.filter((function(e,t){return t<=i})).reduce((function(pre,e){return pre+e})),100)}))}}))}}function y(e,t){return x.apply(this,arguments)}function x(){return(x=Object(n.a)(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=(r=r.filter((function(e){return e.themeID==t}))).length){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,o.getProfiles(r.map((function(e){return{userID:e.userID,userProvider:e.userProvider}})));case 5:return n=e.sent,e.abrupt("return",r.map((function(e){var t=n.find((function(t){var r=t.userID;return t.userProvider==e.userProvider&&r==e.userID}));return{themeID:e.themeID,userID:e.userID,userProvider:e.userProvider,name:t?t.name:"Unknown",imageURI:t?t.imageURI:"",message:e.message,createdAt:e.createdAt}})).sort((function(a,b){return b.createdAt-a.createdAt})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z={components:{BarChart:h,LineChart:d},data:function(){return{message:"",commentResult:0,barOptions:{responsive:!0,scales:{yAxes:[{ticks:{beginAtZero:!0}}]}},lineOptions:{responsive:!0,scales:{xAxes:[{type:"time"}],yAxes:[{ticks:{beginAtZero:!0}}]}}}},methods:{comment:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=(r=e.$store.state.session.sessionToken)){t.next=4;break}return e.commentResult=401,t.abrupt("return");case 4:return t.prev=4,t.next=7,o.comment(e.theme.themeID,r,e.message);case 7:t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(4),e.commentResult=400,t.abrupt("return");case 13:e.commentResult=200;case 14:case"end":return t.stop()}}),t,null,[[4,9]])})))()}},computed:{isSignedIn:function(){return null!=this.$store.state.session.sessionToken}},mounted:function(){var e=this;this.websocket.on("result",(function(t){e.theme.themeID==t.themeID&&(e.result=k(e.theme.title,e.theme.choices,t.percentage))})),this.websocket.on("comments",function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(r){var n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.theme.themeID,t.next=3,y(n,r.comments);case 3:o=t.sent,e.comments=o.concat(e.comments);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},asyncData:function(e){return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,c,l,j;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=parseInt(e.route.hash.slice(2),10),t.next=4,o.getTheme(r);case 4:return n=t.sent,t.next=7,o.getResult(r);case 7:return c=t.sent,t.next=10,o.getTransition(r);case 10:return l=t.sent,t.next=13,o.getComments(r);case 13:return j=t.sent,t.t0=n,t.t1=w(n.choices,l.shortTransition),t.t2=w(n.choices,l.longTransition),t.next=19,y(r,j);case 19:return t.t3=t.sent,t.t4=k(n.title,n.choices,c.percentage),t.t5=m()("https://api.aicevote.com"),t.abrupt("return",{theme:t.t0,shortTransition:t.t1,longTransition:t.t2,comments:t.t3,result:t.t4,websocket:t.t5});case 25:t.prev=25,t.t6=t.catch(0),e.error({statusCode:404,message:"This page could not be found"});case 28:case"end":return t.stop()}}),t,null,[[0,25]])})))()}},D=r(29),component=Object(D.a)(z,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v(e._s(e.theme.title))]),e._v(" "),r("p",[e._v(e._s(e.theme.description))]),e._v(" "),r("h2",[e._v("Result")]),e._v(" "),r("bar-chart",{staticClass:"pure-u-1 pure-u-md-2-3 pure-u-lg-1-2",attrs:{"chart-data":e.result,options:e.barOptions}}),e._v(" "),r("h2",[e._v("Transition")]),e._v(" "),r("div",{staticClass:"pure-u-1 pure-u-md-1-3 pure-u-lg-10-24"},[r("h3",[e._v("Short term")]),e._v(" "),r("line-chart",{attrs:{"chart-data":e.shortTransition,options:e.lineOptions}})],1),e._v(" "),r("div",{staticClass:"pure-u-1 pure-u-md-1-3 pure-u-lg-10-24"},[r("h3",[e._v("Long term")]),e._v(" "),r("line-chart",{attrs:{"chart-data":e.longTransition,options:e.lineOptions}})],1),e._v(" "),r("h2",[e._v("Comments")]),e._v(" "),1==e.isSignedIn?r("div",[r("form",{staticClass:"pure-form"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],attrs:{placeholder:"New comment",required:""},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}}),e._v(" "),r("button",{staticClass:"pure-button pure-button-primary",on:{click:function(t){return t.preventDefault(),e.comment()}}},[r("fa-icon",{staticClass:"fa-fw",attrs:{icon:["fas","comment"]}}),e._v("Â Comment\n      ")],1)]),e._v(" "),0==e.commentResult?r("p"):e._e(),e._v(" "),200==e.commentResult?r("p",[e._v("Success! You commented!")]):e._e(),e._v(" "),400==e.commentResult?r("p",[e._v("Sorry, failed to comment...")]):e._e(),e._v(" "),401==e.commentResult?r("p",[e._v("Please sign in to comment")]):e._e()]):e._e(),e._v(" "),r("table",{staticClass:"pure-table"},[e._m(0),e._v(" "),r("tbody",e._l(e.comments,(function(t){return r("tr",{key:t.createdAt},[r("td",[r("img",{staticClass:"pure-img",attrs:{alt:"User icon",src:t.imageURI}})]),e._v(" "),r("td",[e._v(e._s(t.name))]),e._v(" "),r("td",[e._v(e._s(t.message))]),e._v(" "),r("td",[e._v(e._s(new Date(t.createdAt).toDateString()))])])})),0)])],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",[this._v("#")]),this._v(" "),t("th",[this._v("Name")]),this._v(" "),t("th",[this._v("Comment")]),this._v(" "),t("th",[this._v("Date")])])])}],!1,null,null,null);t.default=component.exports}}]);